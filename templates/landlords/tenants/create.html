<!-- landlords/tenants/create.html -->
{% extends "landlords/landlord_base.html" %}
{% load static %}

{% block title %}Add Tenant{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header with Back Button -->
    <div class="mb-8">
        <div class="flex items-center mb-4">
            <a href="{% url 'landlords:tenants' %}" 
               class="inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700 transition-colors duration-200">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Tenants
            </a>
        </div>
        
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-3xl font-bold text-gray-900">Add New Tenant</h1>
                <p class="text-gray-600 mt-2">
                    {% if property %}
                        Adding tenant for <strong class="text-primary-600">{{ property.name }}</strong>
                    {% else %}
                        Add a new tenant to your property
                    {% endif %}
                </p>
            </div>
            <div class="hidden sm:block">
                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-primary-100 text-primary-800">
                    <i class="fas fa-user-plus mr-1"></i>
                    New Tenant
                </span>
            </div>
        </div>
    </div>

    <!-- Form Card -->
    <div class="bg-white shadow-xl rounded-2xl overflow-hidden border border-gray-100">
        <!-- Form Header -->
        <div class="bg-gradient-to-r from-primary-50 to-blue-50 px-6 py-4 border-b border-gray-200">
            <div class="flex items-center">
                <div class="flex-shrink-0">
                    <div class="w-10 h-10 bg-primary-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                </div>
                <div class="ml-4">
                    <h2 class="text-lg font-semibold text-gray-900">Tenant Details</h2>
                    <p class="text-sm text-gray-600">Fill in the tenant information and lease details</p>
                </div>
            </div>
        </div>

        <div class="px-6 py-8">
            <form method="post" novalidate class="space-y-8" id="tenantForm">
                {% csrf_token %}
                
                <!-- Hidden Property Field -->
                {% if property %}
                <input type="hidden" name="property" value="{{ property.id }}">
                {% endif %}
                
                <!-- Property Info Banner -->
                {% if property %}
                <div class="bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-home text-blue-400 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-blue-800">Property Information</h3>
                            <div class="mt-1 text-sm text-blue-700">
                                <p class="font-semibold">{{ property.name }}</p>
                                <p class="text-blue-600">{{ property.address }}</p>
                                {% if property.rent_amount %}
                                <p class="text-blue-600">Rent: ₦{{ property.rent_amount }}</p>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}
                
                <!-- Form Errors -->
                {% if form.errors %}
                <div class="bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg">
                    <div class="flex">
                        <div class="flex-shrink-0">
                            <i class="fas fa-exclamation-triangle text-red-400 text-lg"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-red-800">
                                Please correct the following errors
                            </h3>
                            <div class="mt-2 text-sm text-red-700">
                                <ul class="list-disc pl-5 space-y-1">
                                    {% for field in form %}
                                        {% for error in field.errors %}
                                            <li><strong>{{ field.label }}:</strong> {{ error }}</li>
                                        {% endfor %}
                                    {% endfor %}
                                    {% for error in form.non_field_errors %}
                                        <li>{{ error }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Rest of the form remains the same as before -->
                <!-- Tenant Information Section -->
                <div class="space-y-6">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
                            <i class="fas fa-user-circle text-primary-600 mr-2"></i>
                            Personal Information
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Basic details about the tenant</p>
                    </div>

                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <!-- Full Name -->
                        <div class="sm:col-span-2">
                            <label for="{{ form.full_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Full Name <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <input type="text" 
                                       name="full_name" 
                                       id="{{ form.full_name.id_for_label }}" 
                                       value="{{ form.full_name.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 placeholder-gray-400 pl-10 pr-10"
                                       placeholder="Enter full name"
                                       required>
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-user text-gray-400"></i>
                                </div>
                            </div>
                            {% if form.full_name.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.full_name.errors.0 }}
                            </p>
                            {% endif %}
                        </div>

                        <!-- Email -->
                        <div>
                            <label for="{{ form.email.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Email Address <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <input type="email" 
                                       name="email" 
                                       id="{{ form.email.id_for_label }}" 
                                       value="{{ form.email.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 placeholder-gray-400 pl-10 pr-10"
                                       placeholder="Enter email address"
                                       required>
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-envelope text-gray-400"></i>
                                </div>
                            </div>
                            {% if form.email.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.email.errors.0 }}
                            </p>
                            {% endif %}
                        </div>

                        <!-- Phone -->
                        <div>
                            <label for="{{ form.phone.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Phone Number <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <input type="tel" 
                                       name="phone" 
                                       id="{{ form.phone.id_for_label }}" 
                                       value="{{ form.phone.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 placeholder-gray-400 pl-10 pr-10"
                                       placeholder="Enter phone number"
                                       required>
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-phone text-gray-400"></i>
                                </div>
                            </div>
                            {% if form.phone.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.phone.errors.0 }}
                            </p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Lease Information Section -->
                <div class="space-y-6">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
                            <i class="fas fa-file-contract text-primary-600 mr-2"></i>
                            Lease Details
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Rental agreement information</p>
                    </div>

                    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                        <!-- Lease Start -->
                        <div>
                            <label for="{{ form.lease_start.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Lease Start Date <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <input type="date" 
                                       name="lease_start" 
                                       id="{{ form.lease_start.id_for_label }}" 
                                       value="{{ form.lease_start.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 pr-10"
                                       required>
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-calendar-alt text-gray-400"></i>
                                </div>
                            </div>
                            {% if form.lease_start.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.lease_start.errors.0 }}
                            </p>
                            {% endif %}
                        </div>

                        <!-- Lease End -->
                        <div>
                            <label for="{{ form.lease_end.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Lease End Date <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <input type="date" 
                                       name="lease_end" 
                                       id="{{ form.lease_end.id_for_label }}" 
                                       value="{{ form.lease_end.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 pr-10"
                                       required>
                                <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                                    <i class="fas fa-calendar-check text-gray-400"></i>
                                </div>
                            </div>
                            {% if form.lease_end.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.lease_end.errors.0 }}
                            </p>
                            {% endif %}
                        </div>

                        <!-- Rent Amount -->
                        <div>
                            <label for="{{ form.rent_amount.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Monthly Rent <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500">₦</span>
                                </div>
                                <input type="number" 
                                       name="rent_amount" 
                                       id="{{ form.rent_amount.id_for_label }}" 
                                       value="{{ form.rent_amount.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 pl-10"
                                       placeholder="0.00"
                                       step="0.01"
                                       min="0"
                                       required>
                            </div>
                            {% if form.rent_amount.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.rent_amount.errors.0 }}
                            </p>
                            {% endif %}
                        </div>

                        <!-- Security Deposit -->
                        <div>
                            <label for="{{ form.security_deposit.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                                Security Deposit
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <span class="text-gray-500">₦</span>
                                </div>
                                <input type="number" 
                                       name="security_deposit" 
                                       id="{{ form.security_deposit.id_for_label }}" 
                                       value="{{ form.security_deposit.value|default:'' }}"
                                       class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 pl-10"
                                       placeholder="0.00"
                                       step="0.01"
                                       min="0">
                            </div>
                            {% if form.security_deposit.errors %}
                            <p class="mt-2 text-sm text-red-600 flex items-center">
                                <i class="fas fa-exclamation-circle mr-1"></i>
                                {{ form.security_deposit.errors.0 }}
                            </p>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- Emergency Contact Section -->
                <div class="space-y-6">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
                            <i class="fas fa-address-card text-primary-600 mr-2"></i>
                            Emergency Contact
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Contact information for emergencies</p>
                    </div>

                    <div>
                        <label for="{{ form.emergency_contact.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            Emergency Contact <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <input type="text" 
                                   name="emergency_contact" 
                                   id="{{ form.emergency_contact.id_for_label }}" 
                                   value="{{ form.emergency_contact.value|default:'' }}"
                                   class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 placeholder-gray-400 pl-10 pr-10"
                                   placeholder="Name - Phone Number"
                                   required>
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-user-friends text-gray-400"></i>
                            </div>
                        </div>
                        <p class="mt-2 text-sm text-gray-500 flex items-center">
                            <i class="fas fa-info-circle mr-1 text-blue-500"></i>
                            Format: Name - Phone Number (e.g., John Doe - 08012345678)
                        </p>
                        {% if form.emergency_contact.errors %}
                        <p class="mt-2 text-sm text-red-600 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>
                            {{ form.emergency_contact.errors.0 }}
                        </p>
                        {% endif %}
                    </div>
                </div>

                <!-- Additional Notes Section -->
                <div class="space-y-6">
                    <div class="border-b border-gray-200 pb-4">
                        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
                            <i class="fas fa-sticky-note text-primary-600 mr-2"></i>
                            Additional Information
                        </h3>
                        <p class="text-sm text-gray-500 mt-1">Any additional notes or special instructions</p>
                    </div>

                    <div>
                        <label for="{{ form.notes.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                            Notes
                        </label>
                        <textarea name="notes" 
                                  id="{{ form.notes.id_for_label }}" 
                                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors duration-200 placeholder-gray-400 resize-vertical min-h-[100px]"
                                  placeholder="Any additional notes about the tenant...">{{ form.notes.value|default:'' }}</textarea>
                        {% if form.notes.errors %}
                        <p class="mt-2 text-sm text-red-600 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>
                            {{ form.notes.errors.0 }}
                        </p>
                        {% endif %}
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="flex flex-col sm:flex-row justify-between items-center pt-8 border-t border-gray-200 space-y-4 sm:space-y-0">
                    <div class="flex items-center text-sm text-gray-500">
                        <i class="fas fa-info-circle mr-2 text-blue-500"></i>
                        All fields marked with <span class="text-red-500">*</span> are required
                    </div>
                    <div class="flex space-x-3">
                        <a href="{% url 'landlords:tenants' %}" 
                           class="px-6 py-3 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 flex items-center">
                            <i class="fas fa-times mr-2"></i>
                            Cancel
                        </a>
                        <button type="submit" 
                                class="px-6 py-3 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 flex items-center"
                                id="submitBtn">
                            <i class="fas fa-user-plus mr-2"></i>
                            Add Tenant
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}